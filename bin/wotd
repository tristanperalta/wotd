#!/usr/bin/env ruby

$:.unshift File.join(File.dirname(__FILE__), *%w[.. lib])
require 'optparse'
require 'wotd'

options = {}
OptionParser.new do |opts|
  opts.banner = 'Usage: wotd'

  opts.on('--update-only') do |u|
    options[:update_only] = u
  end
end.parse!

subs = %w{showerthoughts worldnews todayilearned lifeprotips}
subr = subs.sample

wotd = Wotd::Wotd.new(subr)

if options[:update_only]
  subs.map{|s| Wotd.hit!(s)}
else
  puts "r/#{wotd.subreddit}: #{wotd.get}"
end
